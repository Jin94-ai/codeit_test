# 팀 회의록

### 날짜: 2025-12-18
### 팀명: 코드잇 8팀 (Health Eat)
### 참석자: 김민우, 황유민, 김나연, 김보윤, 이진석

---

## 회의 목적

프로젝트 발표 D-3 시점에서 각 팀원별 담당 파트 및 진행 방향 공유

---

## 프로젝트 배경 (이진석 공유)

> **"여러분들을 헬스케어 스타트업 헬스잇(Health Eat)의 AI 엔지니어링 팀이라고 가정해 볼게요."**

- 헬스잇의 AI 엔지니어링 팀은 유저가 본인의 **모바일 애플리케이션으로 자신이 복용 중인 약 사진을 찍었을 때**, 이미지 인식을 통해 해당 약에 대한 정보를 확인할 수 있는 모델을 만들어야 하는 미션을 부여받음
- 기업에서는 이를 통해 유저의 건강 상태 및 **함께 복용하면 안 되는 약** 등 헬스케어 정보를 유저들에게 제공함으로써 비즈니스적인 가치를 만들어낼 수 있음

---

## 회의 내용

### 1. 김민우 - 서비스 타당성 검토

**핵심 질문: "이 기술이 소비자들에게 필요한가?"**

#### 검토 내용
- **타겟 사용자**: 고령자 (다약제 복용 위험군)
- **제공 가치**:
  - 폐약품 관련 정보 제공
  - 알약 식별 및 효능 안내
- **리텐션 전략**:
  - 커뮤니티 기능 (사용자 간 정보 공유)
  - 광고 수익 모델
- **핵심 기술**: 객체인식 (YOLO) + 챗봇 (LLM)

#### 결론
> **공익성에는 충분한 의의가 있으나, B2C 소비자에게 직접 어필하기는 어려움**
>
> → B2B 모델 (요양원, 재가요양 등) 병행 검토 필요

#### 연관 아젠다 (PROJECT_AGENDA.md 참고)
- 듀얼 마켓 전략: 국내 B2B SaaS (수익 기반) + 글로벌 여행자 (성장 비전)
- B2B SaaS 수익 모델: 월 구독료 기관당 10~30만원

---

### 2. 황유민 - 프롬프트 엔지니어링 (챗봇)

**주제: 객체인식 결과 → 약물 정보 제공 챗봇 구현**

#### 구현 목표
- 알약 인식 후 사용자에게 제공할 정보:
  - **효능/효과**: 해당 약의 주요 효능
  - **복용 주의점**: 복용 시 주의사항
  - **상호작용 체크**: 함께 복용 시 위험한 약물 조합 경고

#### 프롬프트 설계 방향
- 객체인식 모델 출력 (dl_idx, confidence) → LLM 프롬프트 입력
- 약물 DB 연동하여 정확한 정보 제공
- **Uncertainty Handling** 반영:
  - confidence >= 0.9: 결과 표시
  - confidence 0.7~0.9: "다시 촬영해주세요" 안내
  - confidence < 0.7: "인식 불가, 약사에게 문의하세요"

#### 연관 아젠다
> **의료 AI의 철칙: "틀리는 것보다 모른다고 하는 게 100배 낫다"**

---

### 3. 김나연 - B2B 시장 조사

**주제: B2B 위주 잠재 고객 조사**

#### 조사 대상

| 대상 | 니즈 | 기대 효과 |
|------|------|----------|
| **약국** | 환자가 알약만 가져왔을 때 빠른 확인 | 업무 효율화 |
| **응급 구조대원** | 현장에서 환자 복용약 즉시 파악 | 응급처치 정확도 향상 |
| **수사기관** | 범죄 현장 약물 식별 | 수사 효율화 |

#### 발견점
- 약국: 전문가이므로 보조 도구 수준 (우선순위 낮음)
- 응급 구조대/수사기관: 비전문가의 신속한 약물 식별 필요 → **높은 가치**

#### 추가 조사 필요 사항
- 각 기관별 도입 의사결정 프로세스
- 기존 사용 중인 약물 식별 방법

---

### 4. 김보윤 - 모델 배포

**주제: 모바일 앱 환경 배포 방안**

#### 검토 기술
| 기술 | 설명 | 장단점 |
|------|------|--------|
| **포맷 변환** | PyTorch → ONNX → 모바일 최적화 포맷 | 범용성 높음 |
| **ExecuTorch** | Meta의 PyTorch 모바일 배포 프레임워크 | PyTorch 친화적 |
| **Android Studio** | 안드로이드 네이티브 앱 개발 | Kotlin + Jetpack Compose |

#### 아키텍처 결정 (PROJECT_AGENDA.md 참고)

**Cloud 방식 채택 (On-Device 대비 장점)**:
- 앱 크기: ~100MB → **~20MB**
- 모델 업데이트: 앱 업데이트 불필요, 서버만 수정
- 기기 호환성: 저사양 기기도 지원 가능

```
📱 Mobile App (Thin Client)  ───▶  ☁️ Cloud Server (YOLO + GPU)
     ~20MB, CameraX                    FastAPI + PostgreSQL
```

---

### 5. 이진석 - 앱 환경 모델 구현

**주제: 앱 환경에 맞는 모델 선택 및 구현**

#### 현재 구현 완료: 2-Stage Pipeline

```
┌──────────────┐     ┌──────────────┐     ┌──────────────┐
│    Input     │     │   Stage 1    │     │   Stage 2    │
│    Image     │ ──▶ │   Detector   │ ──▶ │  Classifier  │
│              │     │  (YOLO11s)   │     │ (YOLO11s-cls)│
└──────────────┘     └──────────────┘     └──────────────┘
                           │                     │
                           ▼                     ▼
                     bbox 검출              74개 클래스
                     "알약 위치"            "알약 종류"
```

#### 성과
- **Kaggle 점수: 0.815 → 0.96** (+0.145 개선)
- 핵심 버그 수정: category_id 변환 오류 (YOLO index → dl_idx)

#### 팀원 안내사항

> **"앙상블이 아니라 2-Stage Pipeline입니다."**
> - Stage 1: Detector 먼저 실행 (알약 탐지)
> - Stage 2: Classifier 실행 (알약 분류)
> - **테스트 방법**: `src/inference/submit.py`에서 두 best 모델로 실행

#### 모델 파일 위치 (GitHub에 업로드됨)
- `best_detector.pt` - 알약 탐지 모델 (19MB)
- `best_classifier.pt` - 알약 분류 모델 (11MB)

---

## Q&A 및 논의

### Q1. 진석님이 제출하신 건 어떤 모델이었나요? (황유민)

**A:** YOLO11s 기반 2-Stage Pipeline
- Stage 1: Detector (단일 클래스 알약 탐지)
- Stage 2: Classifier (74개 클래스 분류)
- Kaggle 점수 0.96 달성

### Q2. 모바일 최적화하려면 증강을 안 하는 건가요? (황유민)

**A:** 증강은 학습 시에만 적용되므로 추론 시 모바일 최적화와는 별개
- 학습: 데이터 증강으로 모델 성능 향상
- 추론: 모델 경량화 (YOLO11s 사용)로 모바일 최적화

### Q3. 모델을 클라우드에 올리고 클라이언트에서 요청하면 식별 결과 받아오는 형식인가요? (김민우)

**A:** 두 가지 방식 검토
| 방식 | 장점 | 단점 |
|------|------|------|
| **Cloud (채택)** | 앱 용량 작음 (~20MB), 모델 업데이트 용이 | 인터넷 필요 |
| **On-Device** | 오프라인 사용 가능 | 앱 용량 큼 (~100MB), 업데이트 어려움 |

### Q4. pt 파일 있으면 앱 안에 넣어버릴 수 있는 건가요? (김민우)

**A:** 가능하지만 권장하지 않음
- pt 파일 용량이 크고 (19MB + 11MB = 30MB)
- 모델 업데이트 시 앱 전체 재배포 필요
- ExecuTorch 등으로 변환 시 On-Device 가능하지만 Cloud 방식 우선 검토

### Q5. detector와 classifier 두 모델이 하나인 건가요? (김보윤)

**A:** 아니요, 별개의 두 모델입니다.
> **"앙상블이 아니라 2-Stage였습니다. detector 먼저 하고 classifier 하는 두 모델이에요."**

---

## 모델 공유 관련 논의

- 디스코드에 올리려 했으나 용량 초과로 실패
- **GitHub에 업로드 완료**:
  - `best_detector.pt` (19MB)
  - `best_classifier.pt` (11MB)
- 테스트 방법: `src/inference/submit.py` 실행

---

## Action Items

| 담당자 | 작업 내용 | 비고 |
|--------|----------|------|
| 김민우 | B2C/B2B 타당성 분석 정리 | 발표자료 반영 |
| 황유민 | 챗봇 프롬프트 구현 | Uncertainty Handling 포함 |
| 김나연 | B2B 시장 조사 심화 | 응급/수사기관 중심 |
| 김보윤 | 모델 배포 방안 정리 | Cloud 아키텍처 설계도 |
| 이진석 | 2-Stage 모델 팀원 테스트 지원 | submit.py 사용법 공유 |

---

## 다음 일정

- **D-2**: 데이터 & 모델 최종 정리, AIHub 약물 DB 구축
- **D-1**: 발표자료 (PPT), 보고서 작성
- **발표일**: 최종 발표

---

## 참고 문서

- [PROJECT_AGENDA.md](../../docs/PROJECT_AGENDA.md) - 프로젝트 전체 아젠다
- [src/inference/submit.py](../../src/inference/submit.py) - 2-Stage 추론 코드
- [src/inference/pill_pipeline.py](../../src/inference/pill_pipeline.py) - 파이프라인 통합 코드
